<template>
  <div>
    <NavBar />
    <div class="main-container">

        <h2 class="heading" style="color:yellow">
          <svg xmlns="http://www.w3.org/2000/svg" width="193.338" height="82.739" viewBox="0 0 193.338 82.739">
  <g id="Layer_2" transform="translate(-29.908 -73.916)" opacity="0.5">
    <g id="Grupo_1163" data-name="Grupo 1163" transform="translate(30.547 116.384)">
      <path id="Caminho_1961" data-name="Caminho 1961" d="M67.589,215.641l2.643,7.763a58.553,58.553,0,0,0,2.874,7.555.011.011,0,0,0,.007,0c.183-.162,5.357-15.187,5.357-15.187H88.5L76.4,251.021h-6.97s-7.44-21.487-7.409-21.568l-7.766,21.3h-6.9L35.41,215.641l9.979.006s5.467,15.5,5.539,15.5h0l5.455-15.5H67.589M32,213.2l1.1,3.227,11.946,35.109.563,1.654H55.963l.585-1.6L61.94,236.8c.465,1.352.967,2.809,1.469,4.265,1.857,5.383,3.717,10.756,3.717,10.756l.568,1.641H78.143l.565-1.647,12.1-35.252,1.109-3.231H76.731l-.567,1.645c-.907,2.633-2.11,6.107-3.139,9.048q-.233-.669-.484-1.406L69.9,214.855l-.563-1.653H54.657l-.574,1.63L50.9,223.889c-1.053-2.959-2.273-6.408-3.206-9.053l-.574-1.626H45.391l-9.979-.006L32,213.2Z" transform="translate(-32.003 -213.2)" fill="#fff"/>
    </g>
    <g id="Grupo_1164" data-name="Grupo 1164" transform="translate(135.928 116.249)">
      <path id="Caminho_1962" data-name="Caminho 1962" d="M462.277,215.2l-.023,9.24s-9.953-.033-15.013-.033c-1.683,0-2.825,0-2.879.014-.872.159-1.427,2.013-1.18,2.827a16,16,0,0,0,2.022,2.991c.985,1.235,2.6,3.257,3.592,4.491,2.536,3.165,2.884,3.79,3.119,5.607a9.4,9.4,0,0,1-3.607,8.254c-2.6,2.113-2.483,2.128-21.765,2.128H425.7c-11.726,0-17.928-.1-18.831-.3-1.6-.363-4.159-2.448-10.912-8.927-2.429-2.328-4.668-4.367-4.783-4.367a0,0,0,0,0,0,0l-.08,13.592-10.946-.048-.067-35.057h24.411c7.357.266,12.336,7.6,11.345,12.269a13.9,13.9,0,0,1-1.275,3.415,14.269,14.269,0,0,1-5.492,4.754c-.747.338-1.357.731-1.357.871,0,.521,2.458,2.942,3.378,3.326.786.329,3.076.4,13.175.4h3.234c10.151,0,9.64-.073,10.425-1.75.549-1.168.131-1.866-3.732-6.217-4.894-4.87-4.381-7.2-4.415-8.925-.07-2.064,1.556-8.558,10-8.558h22.5m-65.575,16.2c4.686,0,5.638-.073,6.635-.506a4.238,4.238,0,0,0,.317-7.705c-.707-.421-1.616-.491-6.7-.518l-5.878-.031c.048.046-.019,8.406-.019,8.406a28.419,28.419,0,0,0,5.64.354m68.02-18.635H439.775c-4.888,0-7.78,1.929-9.344,3.548a11.1,11.1,0,0,0-3.1,7.509c0,.13,0,.264,0,.4-.022,2.54.352,5.414,5.079,10.137.935,1.053,2.5,2.817,3.089,3.694-1.292.159-4.567.159-8.007.159h-3.234c-6.069,0-11.186-.017-12.235-.224a6.01,6.01,0,0,1-.579-.457,16.525,16.525,0,0,0,5.215-5,16.245,16.245,0,0,0,1.554-4.137c.622-2.935-.4-6.475-2.744-9.473a14.563,14.563,0,0,0-10.9-5.741l-.044,0h-26.9l0,2.444.067,35.057,0,2.424,2.424.011,10.946.048,2.436.011.014-2.436.047-8.143q.335.318.692.66c7.387,7.086,9.866,9.049,12.062,9.546.6.134,1.6.357,19.368.362h.847c9.618,0,14.446,0,17.318-.277a8.977,8.977,0,0,0,5.934-2.355l.053-.043a11.794,11.794,0,0,0,4.487-10.458c-.32-2.473-.974-3.5-3.635-6.82l-.791-.988c-.927-1.158-2.047-2.557-2.8-3.5-.606-.757-1.081-1.43-1.368-1.87l1.5,0c5,0,14.906.033,15.005.034l2.442.008.006-2.442.023-9.24.006-2.444Zm-71.206,16.107c0-.616.008-1.307.012-2,0-.61.006-1.221.007-1.781l3.411.018a48.383,48.383,0,0,1,5.485.19,2.057,2.057,0,0,1,1.1,1.848,1.741,1.741,0,0,1-1.165,1.51c-.534.232-1.384.3-5.662.3-1.357,0-2.4-.039-3.186-.089Z" transform="translate(-377.628 -212.758)" fill="#fff"/>
    </g>
    <g id="Grupo_1165" data-name="Grupo 1165" transform="translate(84.011 116.104)">
      <path id="Caminho_1963" data-name="Caminho 1963" d="M239.537,214.723l12.284,35.344-10.01.046L240.15,244.8l-17.9-.144-1.579,5.315-9.909-.1,12.129-35.133,16.644-.015m-8.05,5.182c-.025.1-1.568,4.335-3.117,8.569-1.561,4.269-3.127,8.537-3.149,8.57,0,0,0,0,0,0h0c.041-.012,5.585-.024,9.137-.024,1.663,0,2.889,0,2.912.009v0h0c-.062-.161-5.765-16.918-5.783-17.124v0h0s0,0,0,0m9.784-7.623-1.736,0-16.644.016-1.737,0-.567,1.642-12.129,35.133-1.1,3.2,3.385.035,9.909.1,1.839.019.524-1.763,1.057-3.556,14.286.114,1.131,3.612.538,1.719,1.8-.008,10.01-.046,3.413-.016-1.121-3.224-12.284-35.344-.57-1.642Zm-12.538,22.3c.462-1.259,1.084-2.961,1.929-5.271l.73-2,.661,1.951c.2.581,1.063,3.131,1.805,5.314-2.207,0-3.869,0-5.125,0Z" transform="translate(-207.354 -212.282)" fill="#fff"/>
    </g>
    <g id="Grupo_1166" data-name="Grupo 1166" transform="translate(29.908 73.916)">
      <path id="Caminho_1964" data-name="Caminho 1964" d="M120.335,76.359v8.72H102.871v26.67H92.458V85.058l-20.386.058a2.572,2.572,0,0,0-2.787,2.708c0,.921.6,1.842,3.9,6.019a61.486,61.486,0,0,1,4.366,6.013c1.415,3.256-.415,8.33-3.747,10.391-2.375,1.467-1.969,1.5-19.608,1.5H32.347v-9.8H62.2l.881-.613a2.533,2.533,0,0,0,1.07-1.765c.183-1.122.088-1.268-3.6-5.421-4.357-4.909-4.817-5.805-4.592-8.94.256-3.576,3.445-8.772,9.019-8.772l55.358-.083m2.439-2.443-2.443,0L64.974,74a10.977,10.977,0,0,0-8.337,3.879,12.725,12.725,0,0,0-3.112,7.158c-.3,4.119.652,5.608,5.2,10.733,1.32,1.487,2.575,2.9,2.994,3.5a.412.412,0,0,1-.016.048l-.021.016-.251.174H29.908v14.675H54.2c8.7,0,12.989-.008,15.518-.194a9.244,9.244,0,0,0,5.2-1.567l.173-.107c4.348-2.69,6.589-9.094,4.7-13.438A65.027,65.027,0,0,0,75.1,92.331a44.9,44.9,0,0,1-3.37-4.584.809.809,0,0,1,.037-.162,1.259,1.259,0,0,1,.305-.03L90.019,87.5v26.684H105.31V87.518h17.465v-13.6Z" transform="translate(-29.908 -73.916)" fill="#fff"/>
    </g>
    <g id="Grupo_1167" data-name="Grupo 1167" transform="translate(116.34 74.203)">
      <path id="Caminho_1965" data-name="Caminho 1965" d="M345.754,77.3l12.251,35.435-9.992-.055-1.622-5.308-17.818-.079-1.592,5.113H316.807L328.924,77.3h16.83M331.481,99.743l12.135-.015h0c.041,0-5.9-17.441-5.937-17.453h0c-.043,0-6.336,17.468-6.2,17.468m16.01-24.886H327.185l-.567,1.643L314.5,111.607l-1.117,3.235h15.393l.534-1.714,1.055-3.391,14.218.063,1.1,3.59.525,1.716,1.795.01,9.992.055,3.444.019-1.125-3.255L348.061,76.5l-.57-1.642ZM334.87,97.3c.752-2.143,1.8-5.079,2.748-7.718.9,2.636,1.893,5.563,2.618,7.711l-5.367.007Z" transform="translate(-313.385 -74.857)" fill="#fff"/>
    </g>
    <g id="Grupo_1168" data-name="Grupo 1168" transform="translate(167.933 74.203)">
      <path id="Caminho_1966" data-name="Caminho 1966" d="M497.78,77.3c7.9,0,13.388.113,14.443.3a10.481,10.481,0,0,1,6.3,3.726,8.44,8.44,0,0,1,2.351,5.958c.323,4.046-1.6,7.537-5.4,9.8-1.107.662-2.244,1.3-2.528,1.433-.436.2-.378.387.4,1.3a16.037,16.037,0,0,0,1.936,1.863l1.024.8,18.928.271.186,9.659h-11.6c-8.976,0-11.848-.082-12.69-.366-1.259-.427-4.29-2.994-10.449-8.854L496.282,99l.046,13.4H485.034V77.3H497.78m-1.664,15.785h6c5.836,0,6.018-.018,6.851-.643a4.046,4.046,0,0,0,1.857-4.031,3.727,3.727,0,0,0-2.622-3.531c-.991-.433-1.946-.5-6.623-.5h-5.461v8.708m1.664-18.224H482.6v39.985h16.181l-.009-2.448-.027-7.688.256.244c7.618,7.248,9.865,8.895,11.348,9.4,1.138.384,3.044.5,13.473.5H537.91l-.048-2.486-.186-9.659-.045-2.358-2.358-.034-18.112-.259-.38-.295c-.121-.094-.267-.219-.423-.359l.368-.219c4.574-2.73,6.972-7.137,6.576-12.09a10.826,10.826,0,0,0-2.9-7.318,13,13,0,0,0-7.759-4.575c-1.665-.289-10.025-.332-14.861-.332Zm.775,11.955h3.022c4.277,0,5.124.071,5.646.3.991.429,1.092.638,1.169,1.511a1.678,1.678,0,0,1-.891,1.864l-.068.051c-.569.105-2.679.105-5.32.105h-3.558v-3.83Z" transform="translate(-482.596 -74.857)" fill="#fff"/>
    </g>
  </g>
          </svg>
        </h2>
        <div class="container">
          <div class="lds-ring" v-if="loading"><div></div><div></div><div></div><div></div></div>
          <section v-else class="cards">
          <div  class="card" v-for="filme of  filmes" v-bind:key="filme.episode_id" v-on:click="showDetails(filme)">
            <div class="card-content">
            <h1>{{filme.title}}</h1>
            <p>{{filme.opening_crawl}}</p>
            <p>{{filme.producer}}</p>
            </div>
          </div>
          </section>

        </div>
      </div>
    </div>
</template>

<script>
import NavBar from '@/components/NavBar';
import axios from 'axios';
import logo from '../assets/logo.svg';
import router from "../routes/routes";
import UserService from "@/services/userService";
const userService = new UserService();

export default {
  data(){
    return{
      filmes: [],
      loading: true,
      hover: false,
      logo
    }
  },
  methods: {
    showDetails(filme){
     router.push({name: 'Details',params: {details:JSON.stringify(filme)}})
    },
    getFacebokUserInfo(){
      let token = localStorage.getItem('facebookToken');
      if(token){
        // eslint-disable-next-line no-undef
        FB.api(`/me`,'GET',{"fields":'id,name,picture'},function(response){
          localStorage.setItem('loginUser',JSON.stringify(response));
          userService.saveUser({
            userId:response.id,
            userName:response.name,
            picture: response.picture.data.url,
            loginType: 'facebook'
          })
        })
      }
    }
  },
  mounted(){
  this.getFacebokUserInfo();
   axios
      .get("http://localhost:5000/api/swapi")
      .then((res) => {
        this.filmes = res.data.data.results
        this.loading = false;
      })
      .catch((e) => {
        console.log(e);
      });
  },
  components:{
    NavBar
  }
}
</script>
